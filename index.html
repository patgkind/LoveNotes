<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sticky Notes Board</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #f0f0f0;
      font-family: sans-serif;
    }
    #board {
      position: relative;
      width: 90vw;
      height: 90vh;
      background: #fff;
      border: 5px solid #ccc;
      border-radius: 12px;
      margin: 5px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      overflow: hidden;
    }
    .note {
      position: absolute;
      width: 200px;
      min-height: 120px;
      background: #fffb7d;
      border-radius: 6px;
      padding: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      cursor: grab;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .note textarea {
      width: 100%;
      height: 80px;
      border: none;
      resize: none;
      background: transparent;
      font-size: 14px;
      outline: none;
    }
    .note img {
      max-width: 100%;
      max-height: 200px;
      object-fit: contain;
      border-radius: 4px;
    }
    .note .actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .note .pin {
      cursor: pointer;
      font-size: 14px;
    }
    .note .delete {
      cursor: pointer;
      color: red;
      font-weight: bold;
      display: none; /* only visible in delete mode */
    }
    .note.editing textarea,
    .note.adding textarea {
      pointer-events: auto;
    }
    .note:not(.editing):not(.adding) textarea {
      pointer-events: none;
    }

    /* Floating Action Button (FAB) */
    #fab {
      position: absolute;
      bottom: 20px;
      right: 20px;
    }
    #fab button {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      border: none;
      background: #2196f3;
      color: #fff;
      font-size: 28px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    }
    #fabOptions {
      display: none;
      position: absolute;
      bottom: 70px;
      right: 0;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      overflow: hidden;
    }
    #fabOptions button {
      display: block;
      width: 100%;
      padding: 8px 12px;
      border: none;
      background: #fff;
      cursor: pointer;
      text-align: left;
    }
    #fabOptions button:hover {
      background: #eee;
    }
  </style>
</head>
<body>
  <div id="board"></div>

  <div id="fab">
    <button id="fabMain">+</button>
    <div id="fabOptions">
      <button id="addNote">Add Note</button>
      <button id="editNotes">Edit Notes</button>
      <button id="deleteNotes">Delete Notes</button>
      <button id="addImage">Add Image</button>
    </div>
  </div>

  <script>
    const board = document.getElementById('board');
    const fabMain = document.getElementById('fabMain');
    const fabOptions = document.getElementById('fabOptions');
    const addNoteBtn = document.getElementById('addNote');
    const editNotesBtn = document.getElementById('editNotes');
    const deleteNotesBtn = document.getElementById('deleteNotes');
    const addImageBtn = document.getElementById('addImage');

    let mode = null; // 'edit', 'delete', 'add'

    fabMain.addEventListener('click', () => {
      fabOptions.style.display = fabOptions.style.display === 'block' ? 'none' : 'block';
    });

    function createNote(x=50, y=50, text='', color='#fffb7d', imageUrl=null) {
      const note = document.createElement('div');
      note.className = 'note';
      note.style.left = x + 'px';
      note.style.top = y + 'px';
      note.style.background = color;

      const actions = document.createElement('div');
      actions.className = 'actions';

      const pin = document.createElement('span');
      pin.className = 'pin';
      pin.textContent = 'ðŸ“Œ';
      pin.onclick = () => {
        if (note.classList.contains('pinned')) {
          note.classList.remove('pinned');
          note.style.zIndex = '';
        } else {
          note.classList.add('pinned');
          note.style.zIndex = 9999;
        }
      };

      const del = document.createElement('span');
      del.className = 'delete';
      del.textContent = 'x';
      del.onclick = () => note.remove();

      actions.appendChild(pin);
      actions.appendChild(del);

      const textarea = document.createElement('textarea');
      textarea.value = text;

      // Disable editing unless in edit/add mode
      textarea.addEventListener('blur', () => {
        note.classList.remove('editing', 'adding');
      });
      textarea.addEventListener('keydown', e => {
        if (e.key === 'Enter') {
          e.preventDefault();
          textarea.blur();
        }
      });

      note.appendChild(actions);
      note.appendChild(textarea);

      if (imageUrl) {
        const img = document.createElement('img');
        img.src = imageUrl;
        note.appendChild(img);
      }

      makeDraggable(note);
      board.appendChild(note);

      return note;
    }

    function makeDraggable(el) {
      let isDragging = false;
      let offsetX, offsetY;

      el.addEventListener('mousedown', e => {
        if (e.target.tagName === 'TEXTAREA' || e.target.tagName === 'INPUT') return;
        isDragging = true;
        offsetX = e.offsetX;
        offsetY = e.offsetY;
        el.style.cursor = 'grabbing';
      });

      document.addEventListener('mousemove', e => {
        if (!isDragging) return;
        const rect = board.getBoundingClientRect();
        el.style.left = (e.clientX - rect.left - offsetX) + 'px';
        el.style.top = (e.clientY - rect.top - offsetY) + 'px';
      });

      document.addEventListener('mouseup', () => {
        isDragging = false;
        el.style.cursor = 'grab';
      });
    }

    addNoteBtn.addEventListener('click', () => {
      const note = createNote(60, 60);
      note.classList.add('adding');
      const textarea = note.querySelector('textarea');
      textarea.focus();

      // Show color picker while adding
      const colorInput = document.createElement('input');
      colorInput.type = 'color';
      colorInput.value = '#fffb7d';
      colorInput.style.width = '100%';
      colorInput.oninput = e => {
        note.style.background = e.target.value;
      };
      note.appendChild(colorInput);
      textarea.addEventListener('blur', () => colorInput.remove());
    });

    editNotesBtn.addEventListener('click', () => {
      mode = 'edit';
      document.querySelectorAll('.note').forEach(note => {
        note.classList.add('editing');
        const textarea = note.querySelector('textarea');
        textarea.removeAttribute('readonly');
      });
    });

    deleteNotesBtn.addEventListener('click', () => {
      mode = 'delete';
      document.querySelectorAll('.note .delete').forEach(del => del.style.display = 'block');
    });

    addImageBtn.addEventListener('click', () => {
      const url = prompt('Enter image URL:');
      if (url) {
        createNote(80, 80, '', '#ffffff', url);
      }
    });
  </script>
</body>
</html>
